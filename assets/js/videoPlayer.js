(()=>{const e=document.querySelector("video"),t=document.querySelector("#play"),a=document.querySelector("#mute"),s=document.querySelector("#currentTime"),u=document.querySelector("#wholeTime"),o=document.querySelector("#volume"),l=document.querySelector("#timeLine"),n=document.querySelector("#fullScreen"),r=document.querySelector("#videoContainer"),d=document.querySelector("#videoControls"),c=t.querySelector("i"),i=a.querySelector("i"),m=n.querySelector("i");document.querySelector("#commentForm");let f=.5,v=null,p=null;const y=e=>new Date(1e3*e).toISOString().substring(14,19),L=()=>d.classList.remove("showControls");t.addEventListener("click",(t=>{e.paused?e.play():e.pause(),c.classList=e.paused?"fas fa-play":"fas fa-pause"})),a.addEventListener("click",(t=>{e.muted?e.muted=!1:e.muted=!0,i.classList=e.muted?"fas fa-volume-mute":"fas fa-volume-up",o.value=e.muted?"0":f})),o.addEventListener("input",(t=>{const{target:{value:a}}=t;e.muted&&(e.muted=!1,i.classList="fas fa-volume-mute"),i.classList="0"==o.value?"fas fa-volume-mute":"fas fa-volume-up",e.volume=a,f=e.volume})),e.addEventListener("loadeddata",(()=>{const t=Math.floor(e.duration);u.innerText=y(t),l.max=t})),e.addEventListener("timeupdate",(t=>{const a=Math.floor(e.currentTime);s.innerText=y(a),l.value=a})),l.addEventListener("input",(t=>{const{target:{value:a}}=t;e.currentTime=a})),n.addEventListener("click",(()=>{document.fullscreenElement?(document.exitFullscreen(),m.classList="fas fa-expand"):(r.requestFullscreen(),m.classList="fas fa-compress")})),r.addEventListener("mousemove",(()=>{v&&(clearTimeout(v),v=null),p&&clearTimeout(p),p=setTimeout(L,2e3),d.classList.add("showControls")})),r.addEventListener("mouseleave",(()=>{v=setTimeout(L,2e3)})),e.addEventListener("click",(t=>{e.paused?e.play():e.pause(),c.classList=e.paused?"fas fa-play":"fas fa-pause"})),e.addEventListener("ended",(()=>{const{id:e}=r.dataset;fetch(`/api/videos/${e}/view`,{method:"POST",body:JSON.stringify({text1:-1,text2:-2})}),c.classList="fas fa-play"})),window.addEventListener("keydown",(t=>{if(console.dir(t.target),"textarea"!==t.target.localName){if("Space"!==t.code)return;e.paused?e.play():e.pause(),c.classList=e.paused?"fas fa-play":"fas fa-pause"}}))})();